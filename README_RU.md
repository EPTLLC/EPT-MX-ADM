# EPT-MX-ADM v1.0.1

[![PyPI version](https://badge.fury.io/py/ept-mx-adm.svg)](https://badge.fury.io/py/ept-mx-adm)
[![Python](https://img.shields.io/pypi/pyversions/ept-mx-adm.svg)](https://pypi.org/project/ept-mx-adm/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Downloads](https://pepy.tech/badge/ept-mx-adm)](https://pepy.tech/project/ept-mx-adm)

```
  _____ ____ _____     __  ____   __      _    ____  __  __ 
 | ____|  _ \_   _|   |  \/  \ \ / /     / \  |  _ \|  \/  |
 |  _| | |_) || |_____|  |\/  |\ \  /____/ _ \ | | | | |\/| |
 | |___|  __/ | |_____|  |  | |/ /  \___/ ___ \| |_| | |  | |
 |_____|_|    |_|     |__|  |_/_/\_\  /_/   \_\____/|_|  |_|
```

**Веб-панель администрирования для Matrix Synapse сервера**

Универсальный инструмент администрирования, работающий с ЛЮБЫМ Matrix сервером - локальным, удаленным, облачным или самостоятельно размещенным. Требуются только учетные данные администратора.

![Страница входа с функциями безопасности](screenshots/login_security.png)

---

## Содержание

- [Возможности](#возможности)
- [Требования](#требования)
- [Установка](#установка)
- [Конфигурация](#конфигурация)
- [Запуск приложения](#запуск-приложения)
- [Использование](#использование)
- [Локализация](#локализация)
- [Развертывание в продакшене](#развертывание-в-продакшене)
- [Устранение неполадок](#устранение-неполадок)
- [Безопасность](#безопасность)
- [Участие в разработке](#участие-в-разработке)
- [Лицензия](#лицензия)
- [Поддержка](#поддержка)

---

## Возможности

### Универсальная совместимость
- Работает с ЛЮБЫМ Matrix сервером (локальным, удаленным, облачным, самостоятельно размещенным)
- Поддержка самоподписанных SSL сертификатов
- Не требует сложной конфигурации
- Поддержка нескольких серверов в одной установке

### Панель управления
- Статистика сервера в реальном времени
- Аналитика пользователей (активные, деактивированные, всего)
- Статистика и аналитика комнат
- Мониторинг хранилища медиа
- Статус работоспособности API
- Информация о версии Synapse
- Отображение версии Python

### Управление пользователями
- Просмотр всех пользователей с пагинацией
- Создание новых пользователей
- Редактирование профилей и настроек пользователей
- Деактивация/реактивация пользователей
- Сброс паролей пользователей
- Просмотр устройств и сессий пользователей
- Хранилище медиа на пользователя
- Фильтрация по гостям и деактивированным пользователям
- Экспорт/импорт CSV
- Расширенный поиск

### Управление комнатами
- Список всех комнат с подробной информацией
- Просмотр деталей и статистики комнат
- Редактирование настроек комнат
- Удаление комнат
- Разблокировка комнат
- Назначение администраторов комнат
- Переключатели видимости столбцов
- Расширенная фильтрация и поиск
- Экспорт CSV
- Пагинация с настраиваемыми строками на странице

### Управление пространствами
- Список всех Matrix пространств
- Просмотр иерархий пространств
- Управление настройками пространств
- Согласованная пагинация
- Современный UI на основе карточек

### Управление медиа
- Панель общей статистики медиа
- Список пользователей с медиа
- Подробный просмотр медиа файлов пользователей
- Фильтрация по типам файлов (Изображения, Видео, Аудио, Документы, Другое)
- Система карантина для подозрительных файлов
- Удаление медиа файлов
- Экспорт CSV
- Читаемые размеры файлов
- Фильтрация по статусу (Нормальный, На карантине)

### Аутентификация и безопасность
- Упрощенная форма входа
- Автоопределение сервера
- Автоматическое форматирование имени пользователя
- Реальная проверка прав администратора Matrix
- Управление сессиями
- Поддержка SSL сертификатов
- Безопасная интеграция с API

### Локализация
- Поддержка нескольких языков: Английский, Русский, Немецкий, Французский, Итальянский, Испанский, Турецкий, Арабский, Иврит, Японский, Китайский
- Простое переключение языков
- Полный перевод интерфейса
- Готова поддержка RTL

### Современный UI/UX
- Адаптивный дизайн для всех устройств
- Переключатель темной/светлой темы
- Фреймворк Bootstrap 5
- Bootstrap Icons
- Chart.js для аналитики
- Плавные анимации
- Модальные диалоги
- Всплывающие уведомления

---

## Требования

### Системные требования
- **Python**: 3.8 или выше
- **pip**: Рекомендуется последняя версия
- **Операционная система**: Linux, macOS (Windows с WSL или ручная настройка)

### Требования к Matrix серверу
- **Matrix Synapse**: Любая версия с включенным Admin API
- **Учетная запись администратора**: Пользователь с правами администратора на Matrix сервере
- **Сетевой доступ**: HTTP/HTTPS доступ к Matrix серверу

### Зависимости Python
Все зависимости перечислены в `requirements.txt`:
- Flask >= 2.3.0
- requests >= 2.31.0
- Jinja2 >= 3.1.0
- MarkupSafe >= 2.1.0
- werkzeug >= 2.3.0

---

## Установка

### Быстрый старт (PyPI - Рекомендуется)

```bash
# Установка из PyPI
pip install ept-mx-adm

# Загрузка статических ресурсов
cd $(pip show ept-mx-adm | grep Location | cut -d' ' -f2)/ept-mx-adm
chmod +x install_assets.sh
./install_assets.sh

# Запуск приложения
python -m ept-mx-adm
# или
ept-mx-adm
```

### Установка из исходного кода

#### Вариант 1: Простая установка
```bash
# Клонирование репозитория
git clone https://github.com/EPTLLC/EPT-MX-ADM.git
cd EPT-MX-ADM

# Установка зависимостей
pip install -r requirements.txt

# Загрузка статических ресурсов
chmod +x install_assets.sh
./install_assets.sh

# Запуск приложения
python app.py
```

#### Вариант 2: Использование вспомогательного скрипта
```bash
# Клонирование репозитория
git clone https://github.com/EPTLLC/EPT-MX-ADM.git
cd EPT-MX-ADM

# Сделать скрипт исполняемым
chmod +x run.sh

# Запуск (автоматически установит зависимости и запустит приложение)
./run.sh
```

#### Вариант 3: С виртуальным окружением
```bash
# Клонирование репозитория
git clone https://github.com/EPTLLC/EPT-MX-ADM.git
cd EPT-MX-ADM

# Создание виртуального окружения
python3 -m venv venv

# Активация виртуального окружения
source venv/bin/activate  # На Windows: venv\Scripts\activate

# Обновление pip
pip install --upgrade pip

# Установка зависимостей
pip install -r requirements.txt

# Загрузка статических ресурсов
chmod +x install_assets.sh
./install_assets.sh

# Запуск приложения
python app.py
```

#### Вариант 4: С pipx (Изолированно)
```bash
# Установка pipx если еще не установлен
python3 -m pip install --user pipx
python3 -m pipx ensurepath

# Клонирование и настройка
git clone https://github.com/EPTLLC/EPT-MX-ADM.git
cd EPT-MX-ADM

# Установка зависимостей (pipx управляет изоляцией)
pip install -r requirements.txt

# Загрузка статических ресурсов
chmod +x install_assets.sh
./install_assets.sh

# Запуск
python app.py
```

#### Вариант 5: Windows (Ручная настройка)
```cmd
# Клонирование репозитория
git clone https://github.com/EPTLLC/EPT-MX-ADM.git
cd EPT-MX-ADM

# Создание виртуального окружения
python -m venv venv

# Активация виртуального окружения
venv\Scripts\activate

# Установка зависимостей
pip install -r requirements.txt

# Загрузка статических ресурсов вручную или используя WSL:
# - Загрузите Bootstrap 5, Bootstrap Icons, Chart.js
# - Разместите в папках static/vendor/
# - См. install_assets.sh для URL

# Запуск приложения
python app.py
```

**Примечание для пользователей Windows:**
- Shell скрипты (.sh файлы) требуют WSL (Windows Subsystem for Linux) или Git Bash
- Альтернативно, вручную загрузите статические ресурсы по CDN ссылкам из `install_assets.sh`
- Само Python приложение работает нативно на Windows

---

## Конфигурация

### config.json

Основной файл конфигурации - `config.json` в корне проекта.

**Конфигурация по умолчанию:**
```json
{
  "matrix_server": "",
  "debug": true,
  "language": "en"
}
```

**Параметры конфигурации:**

| Параметр | Описание | По умолчанию | Обязательный |
|----------|----------|--------------|--------------|
| `matrix_server` | URL вашего Matrix Synapse сервера (можно изменить при входе) | `""` | Нет |
| `debug` | Режим отладки (отключить в продакшене) | `true` | Да |
| `language` | Язык по умолчанию | `"en"` | Да |

### Важные примечания

1. **Matrix Server**: `matrix_server` в config.json опционален - вы можете указать любой сервер при входе
2. **Режим отладки**: Установите `debug` в `false` в продакшене
3. **SSL сертификаты**: Самоподписанные сертификаты поддерживаются автоматически

---

## Запуск приложения

### Режим разработки

```bash
# Активация виртуального окружения если используется
source venv/bin/activate  # На Windows: venv\Scripts\activate

# Запуск приложения
python app.py
```

Приложение запустится на `http://127.0.0.1:5000` (или на хосте/порту указанном в config.json).

### Режим продакшена (Gunicorn)

```bash
# Активация виртуального окружения если используется
source venv/bin/activate

# Запуск с Gunicorn
gunicorn -c gunicorn.conf.py app:app
```

---

## Использование

### Первый вход

1. Откройте браузер и перейдите на `http://localhost:5000` (или ваш настроенный хост:порт)

2. **Форма входа:**
   - **Matrix Server**: Введите домен вашего сервера (например, `matrix.example.com` или `localhost`)
     - Не нужно добавлять `https://` - это добавится автоматически
     - Работает с локальными серверами, удаленными серверами и самоподписанными сертификатами
   
   - **Username**: Введите имя администратора (например, `admin`)
     - Не нужно добавлять `@` или домен - это отформатируется автоматически
   
   - **Password**: Введите пароль администратора Matrix

3. Нажмите "Login"

Приложение:
- Автоматически отформатирует URL сервера (добавит `https://` если нужно)
- Автоматически отформатирует имя пользователя в Matrix ID (добавит `@` и домен)
- Проверит права администратора через Matrix API
- Создаст сессию для вашего пользователя-администратора

---

## Локализация

EPT-MX-ADM поддерживает несколько языков из коробки.

### Доступные языки
- Английский (en)
- Русский (ru)
- Немецкий (de)
- Французский (fr)
- Итальянский (it)
- Испанский (es)
- Турецкий (tr)
- Арабский (ar)
- Иврит (he)
- Японский (ja)
- Китайский (zh)

### Изменение языка

**В приложении:**
1. Нажмите на селектор языка в верхней навигации
2. Выберите предпочитаемый язык
3. Интерфейс обновится немедленно
4. Предпочтение языка сохраняется в сессии

---

## Поддержка

### Политика поддержки

**Поддержка не предоставляется**: Этот проект выпускается как есть, без поддержки, консультаций или помощи.

**Вклад сообщества**: Приветствуется участие в разработке, но не обязательно.

### Ресурсы

- **Документация**: [README.md](README.md) и [CHANGELOG.md](CHANGELOG.md)
- **Issues**: [GitHub Issues](https://github.com/EPTLLC/EPT-MX-ADM/issues) - только для сообщений об ошибках
- **Сообщество**: [@EasyProTech](https://t.me/EasyProTech)

---

### Лучшие практики

1. **Пароли**: Используйте сильные, уникальные пароли для учетных записей администраторов
2. **Режим отладки**: Отключите режим отладки в продакшене
3. **HTTPS**: Всегда используйте HTTPS в продакшене (через reverse proxy)
4. **Контроль доступа**: Ограничьте доступ к приложению через файрвол или VPN
5. **Обновления**: Держите Python, Flask и все зависимости обновленными
6. **Резервные копии**: Регулярные резервные копии конфигурации и данных
7. **Логи**: Регулярно мониторьте логи приложения и сервера

### Поддержка SSL/TLS

EPT-MX-ADM автоматически:
- Поддерживает самоподписанные SSL сертификаты
- Отключает проверку SSL для локальных/разработческих серверов
- Добавляет `https://` к URL серверов если не указано
- Подавляет предупреждения SSL в логах

Для продакшена всегда используйте валидные SSL сертификаты через reverse proxy.

---

## Информация о проекте

- **Название проекта**: EPT-MX-ADM
- **Версия**: 1.0.1
- **Статус**: Готов к продакшену
- **PyPI**: [pypi.org/project/ept-mx-adm](https://pypi.org/project/ept-mx-adm/)
- **Компания**: EasyProTech LLC
- **Сайт**: [www.easypro.tech](https://www.easypro.tech)
- **Разработчик**: Brabus
- **Репозиторий**: [github.com/EPTLLC/EPT-MX-ADM](https://github.com/EPTLLC/EPT-MX-ADM)
- **Лицензия**: MIT
- **Python**: 3.8+
- **Поддерживаемые языки**: EN, RU, DE, FR, IT, ES, TR, AR, HE, JA, ZH

---

## Благодарности

- **Matrix Foundation** за протокол Matrix
- **Synapse Team** за Matrix Synapse сервер
- **Flask Team** за потрясающий веб-фреймворк
- **Bootstrap Team** за UI фреймворк
- **Chart.js Team** за библиотеку визуализации
- **Участники сообщества** за обратную связь и вклад

---

## Changelog

Для подробной истории изменений см. [CHANGELOG.md](CHANGELOG.md).

---

**Создано с заботой компанией EasyProTech LLC**

Посетите нас: [www.easypro.tech](https://www.easypro.tech) | Telegram: [@EasyProTech](https://t.me/EasyProTech)

